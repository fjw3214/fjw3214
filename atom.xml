<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://fjw3214.github.io</id>
    <title>æˆ‘çš„åšå®¢</title>
    <updated>2019-07-17T05:07:47.804Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://fjw3214.github.io"/>
    <link rel="self" href="https://fjw3214.github.io/atom.xml"/>
    <subtitle>é€†æ°´è¡ŒèˆŸ</subtitle>
    <logo>https://fjw3214.github.io/images/avatar.png</logo>
    <icon>https://fjw3214.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, æˆ‘çš„åšå®¢</rights>
    <entry>
        <title type="html"><![CDATA[dns]]></title>
        <id>https://fjw3214.github.io/post/dns</id>
        <link href="https://fjw3214.github.io/post/dns">
        </link>
        <updated>2019-07-17T04:26:28.000Z</updated>
        <content type="html"><![CDATA[<p>[toc]</p>
<h1 id="dnsæœåŠ¡å™¨">DNSæœåŠ¡å™¨</h1>
<h4 id="åŸŸå">åŸŸåï¼š</h4>
<blockquote>
<p>æ ¹åŸŸã€é¡¶çº§åŸŸã€äºŒçº§åŸŸã€å­åŸŸ   åŸŸåé‡‡ç”¨å±‚æ¬¡åŒ–çš„æ–¹å¼è¿›è¡Œç»„ç»‡ï¼Œæ¯ä¸€ä¸ªç‚¹ä»£è¡¨ä¸€ä¸ªå±‚çº§ã€‚ä¸€ä¸ªåŸŸåå®Œæ•´çš„æ ¼ www.wanwang.com. æœ€æœ«å°¾çš„ç‚¹ä»£è¡¨æ ¹åŸŸï¼Œå¸¸å¸¸çœç•¥ï¼›.com å³é¡¶çº§åŸŸï¼ˆTLDï¼‰ï¼›wanwang.com å³äºŒçº§åŸŸã€‚ä¾æ¬¡ç±»æ¨ï¼Œè¿˜æœ‰ä¸‰çº§åŸŸã€å››çº§åŸŸç­‰ç­‰ã€‚å­åŸŸæ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œwanwang.com æ˜¯ .com çš„å­åŸŸï¼Œwww.wanwang.com æ˜¯ wanwang.com çš„å­åŸŸã€‚</p>
</blockquote>
<pre><code>æµè§ˆå™¨å¿…é¡»çŸ¥é“æ•°å­—åŒ–çš„IPåœ°å€æ‰èƒ½è®¿é—®ç½‘ç«™
</code></pre>
<hr>
<h4 id="aè®°å½•">Aè®°å½•ï¼š</h4>
<blockquote>
<p>A (Address) è®°å½•æ˜¯ç”¨æ¥æŒ‡å®šä¸»æœºåï¼ˆæˆ–åŸŸåï¼‰å¯¹åº”çš„IPåœ°å€è®°å½•ã€‚ç”¨æˆ·å¯ä»¥å°†è¯¥åŸŸåä¸‹çš„ç½‘ç«™æœåŠ¡å™¨æŒ‡å‘åˆ°è‡ªå·±çš„web serverä¸Šã€‚åŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®æ‚¨åŸŸåçš„äºŒçº§åŸŸåã€‚</p>
</blockquote>
<pre><code>å¦‚ï¼š
1) www.dns.la è½¬åˆ°IP 116.255.202.1
2) web.dns.la è½¬åˆ°IP 116.255.202.11
3) mail.dns.la è½¬åˆ°IP 116.255.202.111
</code></pre>
<hr>
<h4 id="cnameè®°å½•">CNAMEè®°å½•:</h4>
<blockquote>
<p>åˆ«åè®°å½•ã€‚è¿™ç§è®°å½•å…è®¸æ‚¨å°†å¤šä¸ªåå­—æ˜ å°„åˆ°å¦å¤–ä¸€ä¸ªåŸŸåã€‚é€šå¸¸ç”¨äºåŒæ—¶æä¾›WWWå’ŒMAILæœåŠ¡çš„è®¡ç®—æœºã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€å°è®¡ç®—æœºåä¸ºâ€œhost.mydomain.comâ€ï¼ˆAè®°å½•ï¼‰ã€‚å®ƒåŒæ—¶æä¾›WWWå’ŒMAILæœåŠ¡ï¼Œä¸ºäº†ä¾¿äºç”¨æˆ·è®¿é—®æœåŠ¡ã€‚å¯ä»¥ä¸ºè¯¥è®¡ç®—æœºè®¾ç½®ä¸¤ä¸ªåˆ«åï¼ˆCNAMEï¼‰ï¼šWWWå’ŒMAILã€‚è¿™ä¸¤ä¸ªåˆ«åçš„å…¨ç§°å°± http://www.mydomain.com/å’Œâ€œmail.mydomain.comâ€ã€‚å®é™…ä¸Šä»–ä»¬éƒ½æŒ‡å‘ â€œhost.mydomain.comâ€ã€‚</p>
</blockquote>
<h4 id="åŒºåˆ«">åŒºåˆ«ï¼š</h4>
<blockquote>
<p>CNAMEæœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ç¨³å®šï¼Œå°±å¥½åƒä¸€ä¸ªIPä¸ä¸€ä¸ªåŸŸåçš„åŒºåˆ«ã€‚<br>
æœåŠ¡å•†ä»æ–¹ä¾¿ç»´æŠ¤çš„è§’åº¦ï¼Œä¸€èˆ¬ä¹Ÿå»ºè®®ç”¨æˆ·ä½¿ç”¨CNAMEè®°å½•ç»‘å®šåŸŸåçš„ã€‚å¦‚æœä¸»æœºä½¿ç”¨äº†åŒçº¿IPï¼Œæ˜¾ç„¶ä½¿ç”¨CNAMEä¹Ÿè¦æ–¹ä¾¿ä¸€äº›ã€‚<br>
Aè®°å½•ä¹Ÿæœ‰ä¸€äº›å¥½å¤„ï¼Œä¾‹å¦‚å¯ä»¥åœ¨è¾“å…¥åŸŸåæ—¶ä¸ç”¨è¾“å…¥WWW.æ¥è®¿é—®ç½‘ç«™å“¦ï¼ä»SEOä¼˜åŒ–è§’åº¦æ¥çœ‹ï¼Œä¸€äº›æœç´¢å¼•æ“å¦‚alexæˆ–ä¸€äº›æœç´¢æŸ¥è¯¢å·¥å…·ç½‘ç«™ç­‰ç­‰åˆ™é»˜è®¤æ˜¯è‡ªåŠ¨å»æ‰WWW.æ¥è¾¨åˆ«ç½‘ç«™ï¼ŒCNAMEè®°å½•æ˜¯å¿…é¡»æœ‰å¦‚ï¼šWWW(åˆ«å)å‰ç¼€çš„åŸŸåï¼Œæœ‰æ—¶å€™ä¼šé‡åˆ°è¿™æ ·çš„éº»çƒ¦ï¼Œå‰ç¼€å»æ‰äº†é»˜è®¤ç½‘ç«™æ— æ³•è®¿é—®ã€‚ä¹Ÿæœ‰äººè®¤ä¸ºåŒä¸€ä¸ªåŸŸååŠ WWW.å’Œä¸åŠ WWW.è®¿é—®ç½‘ç«™ä¹Ÿä¼šä½¿ç½‘ç«™æƒé‡åˆ†æ•£ï¼Œè¿™ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨301è·³è½¬æŠŠä¸åŠ WWW.è·³è½¬åˆ°åŠ WWW.çš„åŸŸå.</p>
</blockquote>
<h4 id="mxè®°å½•mail-exchange">MXè®°å½•(Mail Exchange)</h4>
<blockquote>
<p>é‚®ä»¶äº¤æ¢è®°å½•ï¼Œç”¨æˆ·å¯ä»¥å°†è¯¥åŸŸåä¸‹çš„é‚®ä»¶æœåŠ¡å™¨æŒ‡å‘åˆ°è‡ªå·±çš„mail serverä¸Šï¼Œç„¶åå³å¯è‡ªè¡Œæ“ä½œæ§åˆ¶æ‰€æœ‰çš„é‚®ç®±è®¾ç½®ã€‚è¦æ³¨æ„çš„æ˜¯é‚®ç®±DNSè§£æå’ŒHTTP DNSè§£ææ˜¯ç‹¬ç«‹çš„ï¼Œå¦‚æœä½ è®¾ç½®Aè®°å½•<br>
æ˜¯æŒ‡å‘123.12.123.123ï¼Œè€ŒMXè®°å½•ä½ è®¾ç½®æ˜¯æŒ‡å‘222.22.222.222ï¼Œé‚£ä¹ˆä½ çš„DNSæœåŠ¡å™¨æ¥æ”¶åˆ°åˆ«äººçš„é‚®ä»¶è·¯ ç”±è¯·æ±‚æ—¶å°±å°†ä¼šå°†å®ƒçš„è¯·æ±‚è§£é‡Šåˆ°222.22.222.222ä¸Šå»ï¼è€Œåˆ«äººè®¿é—®ä½ çš„ç½‘é¡µ<br>
çš„æ—¶å€™ä»ç„¶æ˜¯è®¿é—®123.12.123.123ã€‚</p>
</blockquote>
<h4 id="nsè®°å½•name-server">NSè®°å½•(Name Server)</h4>
<blockquote>
<p>åŸŸåæœåŠ¡å™¨è®°å½•ï¼Œç”¨æ¥æŒ‡å®šè¯¥åŸŸåç”±å“ªä¸ªDNSæœåŠ¡å™¨æ¥è¿›è¡Œè§£æï¼Œå¯ä»¥æŠŠä¸€ä¸ªåŸŸåçš„ä¸åŒäºŒçº§åŸŸååˆ†åˆ«æŒ‡å‘åˆ°ä¸åŒçš„DNSç³»ç»Ÿæ¥è§£æ</p>
</blockquote>
<h4 id=""></h4>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[nginx]]></title>
        <id>https://fjw3214.github.io/post/nginx</id>
        <link href="https://fjw3214.github.io/post/nginx">
        </link>
        <updated>2019-07-16T07:35:53.000Z</updated>
        <content type="html"><![CDATA[<p>ä¼ ç»Ÿä¸ŠåŸºäºè¿›ç¨‹æˆ–çº¿ç¨‹æ¨¡å‹æ¶æ„çš„webæœåŠ¡é€šè¿‡æ¯è¿›ç¨‹æˆ–æ¯çº¿ç¨‹å¤„ç†å¹¶å‘è¿æ¥è¯·æ±‚ï¼Œè¿™åŠ¿å¿…ä¼šåœ¨ç½‘ç»œå’ŒI/Oæ“ä½œæ—¶äº§ç”Ÿé˜»å¡ï¼Œå…¶å¦ä¸€ä¸ªå¿…ç„¶ç»“æœåˆ™æ˜¯å¯¹å†…å­˜æˆ–CPUçš„åˆ©ç”¨ç‡ä½ä¸‹ã€‚ç”Ÿæˆä¸€ä¸ªæ–°çš„è¿›ç¨‹/çº¿ç¨‹éœ€è¦äº‹å…ˆå¤‡å¥½å…¶è¿è¡Œæ—¶ç¯å¢ƒï¼Œè¿™åŒ…æ‹¬ä¸ºå…¶åˆ†é…å †å†…å­˜å’Œæ ˆå†…å­˜ï¼Œä»¥åŠä¸ºå…¶åˆ›å»ºæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ç­‰ã€‚è¿™äº›æ“ä½œéƒ½éœ€è¦å ç”¨CPUï¼Œè€Œä¸”è¿‡å¤šçš„è¿›ç¨‹/çº¿ç¨‹è¿˜ä¼šå¸¦æ¥çº¿ç¨‹æŠ–åŠ¨æˆ–é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç³»ç»Ÿæ€§èƒ½ä¹Ÿä¼šç”±æ­¤è¿›ä¸€æ­¥ä¸‹é™ã€‚</p>
<p>åœ¨è®¾è®¡çš„æœ€åˆé˜¶æ®µï¼Œnginxçš„ä¸»è¦ç€çœ¼ç‚¹å°±æ˜¯å…¶é«˜æ€§èƒ½ä»¥åŠå¯¹ç‰©ç†è®¡ç®—èµ„æºçš„é«˜å¯†åº¦åˆ©ç”¨ï¼Œå› æ­¤å…¶é‡‡ç”¨äº†ä¸åŒçš„æ¶æ„æ¨¡å‹ã€‚å—å¯å‘äºå¤šç§æ“ä½œç³»ç»Ÿè®¾è®¡ä¸­åŸºäºâ€œäº‹ä»¶â€çš„é«˜çº§å¤„ç†æœºåˆ¶ï¼Œnginxé‡‡ç”¨äº†æ¨¡å—åŒ–ã€äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥ã€å•çº¿ç¨‹åŠéé˜»å¡çš„æ¶æ„ï¼Œå¹¶å¤§é‡é‡‡ç”¨äº†å¤šè·¯å¤ç”¨åŠäº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚åœ¨nginxä¸­ï¼Œè¿æ¥è¯·æ±‚ç”±ä¸ºæ•°ä¸å¤šçš„å‡ ä¸ªä»…åŒ…å«ä¸€ä¸ªçº¿ç¨‹çš„è¿›ç¨‹workerä»¥é«˜æ•ˆçš„å›ç¯(run-loop)æœºåˆ¶è¿›è¡Œå¤„ç†ï¼Œè€Œæ¯ä¸ªworkerå¯ä»¥å¹¶è¡Œå¤„ç†æ•°åƒä¸ªçš„å¹¶å‘è¿æ¥åŠè¯·æ±‚ã€‚</p>
<p>å¦‚æœè´Ÿè½½ä»¥CPUå¯†é›†å‹åº”ç”¨ä¸ºä¸»ï¼Œå¦‚SSLæˆ–å‹ç¼©åº”ç”¨ï¼Œåˆ™workeræ•°åº”ä¸CPUæ•°ç›¸åŒï¼›å¦‚æœè´Ÿè½½ä»¥IOå¯†é›†å‹ä¸ºä¸»ï¼Œå¦‚å“åº”å¤§é‡å†…å®¹ç»™å®¢æˆ·ç«¯ï¼Œåˆ™workeræ•°åº”è¯¥ä¸ºCPUä¸ªæ•°çš„1.5æˆ–2å€ã€‚</p>
<p>Nginxä¼šæŒ‰éœ€åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼šä¸€ä¸ªä¸»è¿›ç¨‹(master)å’Œå‡ ä¸ªå·¥ä½œè¿›ç¨‹(worker)ï¼Œé…ç½®äº†ç¼“å­˜æ—¶è¿˜ä¼šæœ‰ç¼“å­˜åŠ è½½å™¨è¿›ç¨‹(cache loader)å’Œç¼“å­˜ç®¡ç†å™¨è¿›ç¨‹(cache manager)ç­‰ã€‚æ‰€æœ‰è¿›ç¨‹å‡æ˜¯ä»…å«æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸»è¦é€šè¿‡â€œå…±äº«å†…å­˜â€çš„æœºåˆ¶å®ç°è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸»è¿›ç¨‹ä»¥rootç”¨æˆ·èº«ä»½è¿è¡Œï¼Œè€Œworkerã€cache loaderå’Œcache managerå‡åº”ä»¥éç‰¹æƒç”¨æˆ·èº«ä»½è¿è¡Œã€‚</p>
<p>ä¸»è¿›ç¨‹ä¸»è¦å®Œæˆå¦‚ä¸‹å·¥ä½œï¼š</p>
<ol>
<li>è¯»å–å¹¶éªŒæ­£é…ç½®ä¿¡æ¯ï¼›</li>
<li>åˆ›å»ºã€ç»‘å®šåŠå…³é—­å¥—æ¥å­—ï¼›</li>
<li>å¯åŠ¨ã€ç»ˆæ­¢åŠç»´æŠ¤workerè¿›ç¨‹çš„ä¸ªæ•°ï¼›</li>
<li>æ— é¡»ä¸­æ­¢æœåŠ¡è€Œé‡æ–°é…ç½®å·¥ä½œç‰¹æ€§ï¼›</li>
<li>æ§åˆ¶éä¸­æ–­å¼ç¨‹åºå‡çº§ï¼Œå¯ç”¨æ–°çš„äºŒè¿›åˆ¶ç¨‹åºå¹¶åœ¨éœ€è¦æ—¶å›æ»šè‡³è€ç‰ˆæœ¬ï¼›</li>
<li>é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ï¼Œå®ç°æ—¥å¿—æ»šåŠ¨ï¼›</li>
<li>ç¼–è¯‘åµŒå…¥å¼perlè„šæœ¬ï¼›</li>
</ol>
<p>workerè¿›ç¨‹ä¸»è¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ¥æ”¶ã€ä¼ å…¥å¹¶å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼›</li>
<li>æä¾›åå‘ä»£ç†åŠè¿‡æ»¤åŠŸèƒ½ï¼›</li>
<li>nginxä»»ä½•èƒ½å®Œæˆçš„å…¶å®ƒä»»åŠ¡ï¼›</li>
</ol>
<p>cache loaderè¿›ç¨‹ä¸»è¦å®Œæˆçš„ä»»åŠ¡åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ£€æŸ¥ç¼“å­˜å­˜å‚¨ä¸­çš„ç¼“å­˜å¯¹è±¡ï¼›</li>
<li>ä½¿ç”¨ç¼“å­˜å…ƒæ•°æ®å»ºç«‹å†…å­˜æ•°æ®åº“ï¼›</li>
</ol>
<p>cache managerè¿›ç¨‹çš„ä¸»è¦ä»»åŠ¡ï¼š</p>
<ol>
<li>ç¼“å­˜çš„å¤±æ•ˆåŠè¿‡æœŸæ£€éªŒï¼›</li>
</ol>
<p>Nginxçš„é…ç½®æœ‰ç€å‡ ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡ï¼šmainã€httpã€serverã€upstreamå’Œlocation(è¿˜æœ‰å®ç°é‚®ä»¶æœåŠ¡åå‘ä»£ç†çš„mail)ã€‚é…ç½®è¯­æ³•çš„æ ¼å¼å’Œå®šä¹‰æ–¹å¼éµå¾ªæ‰€è°“çš„Cé£æ ¼ï¼Œå› æ­¤æ”¯æŒåµŒå¥—ï¼Œè¿˜æœ‰ç€é€»è¾‘æ¸…æ™°å¹¶æ˜“äºåˆ›å»ºã€é˜…è¯»å’Œç»´æŠ¤ç­‰ä¼˜åŠ¿ã€‚</p>
<p>Nginxçš„ä»£ç æ˜¯ç”±ä¸€ä¸ªæ ¸å¿ƒå’Œä¸€ç³»åˆ—çš„æ¨¡å—ç»„æˆ, æ ¸å¿ƒä¸»è¦ç”¨äºæä¾›Web Serverçš„åŸºæœ¬åŠŸèƒ½ï¼Œä»¥åŠWebå’ŒMailåå‘ä»£ç†çš„åŠŸèƒ½ï¼›è¿˜ç”¨äºå¯ç”¨ç½‘ç»œåè®®ï¼Œåˆ›å»ºå¿…è¦çš„è¿è¡Œæ—¶ç¯å¢ƒä»¥åŠç¡®ä¿ä¸åŒçš„æ¨¡å—ä¹‹é—´å¹³æ»‘åœ°è¿›è¡Œäº¤äº’ã€‚ä¸è¿‡ï¼Œå¤§å¤šè·Ÿåè®®ç›¸å…³çš„åŠŸèƒ½å’ŒæŸåº”ç”¨ç‰¹æœ‰çš„åŠŸèƒ½éƒ½æ˜¯ç”±nginxçš„æ¨¡å—å®ç°çš„ã€‚è¿™äº›åŠŸèƒ½æ¨¡å—å¤§è‡´å¯ä»¥åˆ†ä¸ºäº‹ä»¶æ¨¡å—ã€é˜¶æ®µæ€§å¤„ç†å™¨ã€è¾“å‡ºè¿‡æ»¤å™¨ã€å˜é‡å¤„ç†å™¨ã€åè®®ã€upstreamå’Œè´Ÿè½½å‡è¡¡å‡ ä¸ªç±»åˆ«ï¼Œè¿™äº›å…±åŒç»„æˆäº†nginxçš„httpåŠŸèƒ½ã€‚äº‹ä»¶æ¨¡å—ä¸»è¦ç”¨äºæä¾›OSç‹¬ç«‹çš„(ä¸åŒæ“ä½œç³»ç»Ÿçš„äº‹ä»¶æœºåˆ¶æœ‰æ‰€ä¸åŒ)äº‹ä»¶é€šçŸ¥æœºåˆ¶å¦‚kqueueæˆ–epollç­‰ã€‚åè®®æ¨¡å—åˆ™è´Ÿè´£å®ç°nginxé€šè¿‡httpã€tls/sslã€smtpã€pop3ä»¥åŠimapä¸å¯¹åº”çš„å®¢æˆ·ç«¯å»ºç«‹ä¼šè¯ã€‚</p>
<p>åœ¨nginxå†…éƒ¨ï¼Œè¿›ç¨‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡æ¨¡å—çš„pipelineæˆ–chainå®ç°çš„ï¼›æ¢å¥è¯è¯´ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½æˆ–æ“ä½œéƒ½ç”±ä¸€ä¸ªæ¨¡å—æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œå‹ç¼©ã€é€šè¿‡FastCGIæˆ–uwsgiåè®®ä¸upstreamæœåŠ¡å™¨é€šä¿¡ï¼Œä»¥åŠä¸memcachedå»ºç«‹ä¼šè¯ç­‰ã€‚</p>
<p>ä¸€ã€å®‰è£…Nginxï¼š</p>
<p>1ã€è§£å†³ä¾èµ–å…³ç³»</p>
<p>ç¼–è¯‘å®‰è£…nginxéœ€è¦äº‹å…ˆéœ€è¦å®‰è£…å¼€å‘åŒ…ç»„&quot;Development Tools&quot;å’Œ &quot;Development Libraries&quot;ã€‚åŒæ—¶ï¼Œè¿˜éœ€è¦ä¸“é—¨å®‰è£…pcre-develåŒ…ï¼š</p>
<h1 id="yum-y-install-pcre-devel">yum -y install pcre-devel</h1>
<p>2ã€å®‰è£…</p>
<p>é¦–å…ˆæ·»åŠ ç”¨æˆ·nginxï¼Œå®ç°ä»¥ä¹‹è¿è¡ŒnginxæœåŠ¡è¿›ç¨‹ï¼š</p>
<h1 id="groupadd-r-nginx">groupadd -r nginx</h1>
<h1 id="useradd-r-g-nginx-nginx">useradd -r -g nginx nginx</h1>
<p>æ¥ç€å¼€å§‹ç¼–è¯‘å’Œå®‰è£…ï¼š</p>
<h1 id="configure">./configure \</h1>
<p>--prefix=/usr/local/nginx <br>
--sbin-path=/usr/local/nginx/sbin/nginx <br>
--conf-path=/etc/nginx/nginx.conf <br>
--error-log-path=/var/log/nginx/error.log <br>
--http-log-path=/var/log/nginx/access.log <br>
--pid-path=/var/run/nginx/nginx.pid  <br>
--lock-path=/var/lock/nginx.lock <br>
--user=nginx <br>
--group=nginx <br>
--with-http_ssl_module <br>
--with-http_flv_module <br>
--with-http_stub_status_module <br>
--with-http_gzip_static_module <br>
--http-client-body-temp-path=/var/tmp/nginx/client/ <br>
--http-proxy-temp-path=/var/tmp/nginx/proxy/ <br>
--http-fastcgi-temp-path=/var/tmp/nginx/fcgi/ <br>
--http-uwsgi-temp-path=/var/tmp/nginx/uwsgi <br>
--http-scgi-temp-path=/var/tmp/nginx/scgi <br>
--with-pcre</p>
<h1 id="make-make-install">make &amp;&amp; make install</h1>
<p>è¯´æ˜ï¼šå¦‚æœæƒ³ä½¿ç”¨nginxçš„perlæ¨¡å—ï¼Œå¯ä»¥é€šè¿‡ä¸ºconfigureè„šæœ¬æ·»åŠ --with-http_perl_moduleé€‰é¡¹æ¥å®ç°ï¼Œä½†ç›®å‰æ­¤æ¨¡å—ä»å¤„äºå®éªŒæ€§ä½¿ç”¨é˜¶æ®µï¼Œå¯èƒ½ä¼šåœ¨è¿è¡Œä¸­å‡ºç°æ„å¤–ï¼Œå› æ­¤ï¼Œå…¶å®ç°æ–¹å¼è¿™é‡Œä¸å†ä»‹ç»ã€‚å¦‚æœæƒ³ä½¿ç”¨åŸºäºnginxçš„cgiåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åŸºäºFCGIæ¥å®ç°ï¼Œå…·ä½“å®ç°æ–¹æ³•è¯·å‚ç…§ç½‘ä¸Šçš„æ–‡æ¡£ã€‚</p>
<p>3ã€ä¸ºnginxæä¾›SysV initè„šæœ¬:</p>
<p>æ–°å»ºæ–‡ä»¶/etc/rc.d/init.d/nginxï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br>
#!/bin/sh</p>
<h1 id=""></h1>
<h1 id="nginx-this-script-starts-and-stops-the-nginx-daemon">nginx - this script starts and stops the nginx daemon</h1>
<h1 id="-2"></h1>
<h1 id="chkconfig-85-15">chkconfig:   - 85 15</h1>
<h1 id="description-nginx-is-an-https-server-https-reverse">description:  Nginx is an HTTP(S) server, HTTP(S) reverse \</h1>
<h1 id="proxy-and-imappop3-proxy-server">proxy and IMAP/POP3 proxy server</h1>
<h1 id="processname-nginx">processname: nginx</h1>
<h1 id="config-etcnginxnginxconf">config:      /etc/nginx/nginx.conf</h1>
<h1 id="config-etcsysconfignginx">config:      /etc/sysconfig/nginx</h1>
<h1 id="pidfile-varrunnginxpid">pidfile:     /var/run/nginx.pid</h1>
<h1 id="source-function-library">Source function library.</h1>
<p>. /etc/rc.d/init.d/functions</p>
<h1 id="source-networking-configuration">Source networking configuration.</h1>
<p>. /etc/sysconfig/network</p>
<h1 id="check-that-networking-is-up">Check that networking is up.</h1>
<p>[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</p>
<p>nginx=&quot;/usr/sbin/nginx&quot;<br>
prog=$(basename $nginx)</p>
<p>NGINX_CONF_FILE=&quot;/etc/nginx/nginx.conf&quot;</p>
<p>[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</p>
<p>lockfile=/var/lock/subsys/nginx</p>
<p>make_dirs() {</p>
<h1 id="make-required-directories">make required directories</h1>
<p>user=<code>nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed 's/[^*]*--user=\([^ ]*\).*/\1/g' -</code><br>
options=<code>$nginx -V 2&gt;&amp;1 | grep 'configure arguments:'</code><br>
for opt in $options; do<br>
if [ <code>echo $opt | grep '.*-temp-path'</code> ]; then<br>
value=<code>echo $opt | cut -d &quot;=&quot; -f 2</code><br>
if [ ! -d &quot;$value&quot; ]; then<br>
# echo &quot;creating&quot; $value<br>
mkdir -p $value &amp;&amp; chown -R $user $value<br>
fi<br>
fi<br>
done<br>
}</p>
<p>start() {<br>
[ -x $nginx ] || exit 5<br>
[ -f $NGINX_CONF_FILE ] || exit 6<br>
make_dirs<br>
echo -n $&quot;Starting $prog: &quot;<br>
daemon $nginx -c <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>G</mi><mi>I</mi><mi>N</mi><msub><mi>X</mi><mi>C</mi></msub><mi>O</mi><mi>N</mi><msub><mi>F</mi><mi>F</mi></msub><mi>I</mi><mi>L</mi><mi>E</mi><mi>r</mi><mi>e</mi><mi>t</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">NGINX_CONF_FILE
    retval=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">L</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span></span></span>?<br>
echo<br>
[ $retval -eq 0 ] &amp;&amp; touch $lockfile<br>
return $retval<br>
}</p>
<p>stop() {<br>
echo -n $&quot;Stopping $prog: &quot;<br>
killproc <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mo>âˆ’</mo><mi>Q</mi><mi>U</mi><mi>I</mi><mi>T</mi><mi>r</mi><mi>e</mi><mi>t</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">prog -QUIT
    retval=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span></span></span>?<br>
echo<br>
[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile<br>
return $retval<br>
}</p>
<p>restart() {<br>
configtest || return $?<br>
stop<br>
sleep 1<br>
start<br>
}</p>
<p>reload() {<br>
configtest || return $?<br>
echo -n $&quot;Reloading $prog: &quot;<br>
killproc <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>g</mi><mi>i</mi><mi>n</mi><mi>x</mi><mo>âˆ’</mo><mi>H</mi><mi>U</mi><mi>P</mi><mi>R</mi><mi>E</mi><mi>T</mi><mi>V</mi><mi>A</mi><mi>L</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">nginx -HUP
    RETVAL=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault">A</span><span class="mord mathdefault">L</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span></span></span></span>?<br>
echo<br>
}</p>
<p>force_reload() {<br>
restart<br>
}</p>
<p>configtest() {<br>
$nginx -t -c $NGINX_CONF_FILE<br>
}</p>
<p>rh_status() {<br>
status $prog<br>
}</p>
<p>rh_status_q() {<br>
rh_status &gt;/dev/null 2&gt;&amp;1<br>
}</p>
<p>case &quot;$1&quot; in<br>
start)<br>
rh_status_q &amp;&amp; exit 0<br>
$1<br>
;;<br>
stop)<br>
rh_status_q || exit 0<br>
$1<br>
;;<br>
restart|configtest)<br>
$1<br>
;;<br>
reload)<br>
rh_status_q || exit 7<br>
$1<br>
;;<br>
force-reload)<br>
force_reload<br>
;;<br>
status)<br>
rh_status<br>
;;<br>
condrestart|try-restart)<br>
rh_status_q || exit 0<br>
;;<br>
*)<br>
echo $&quot;Usage: $0 {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}&quot;<br>
exit 2<br>
esac</p>
<p>è€Œåä¸ºæ­¤è„šæœ¬èµ‹äºˆæ‰§è¡Œæƒé™ï¼š</p>
<h1 id="chmod-x-etcrcdinitdnginx">chmod +x /etc/rc.d/init.d/nginx</h1>
<p>æ·»åŠ è‡³æœåŠ¡ç®¡ç†åˆ—è¡¨ï¼Œå¹¶è®©å…¶å¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼š</p>
<h1 id="chkconfig-add-nginx">chkconfig --add nginx</h1>
<h1 id="chkconfig-nginx-on">chkconfig nginx on</h1>
<p>è€Œåå°±å¯ä»¥å¯åŠ¨æœåŠ¡å¹¶æµ‹è¯•äº†ï¼š</p>
<h1 id="service-nginx-start">service nginx start</h1>
<p>äºŒã€å®‰è£…mysql-5.5.28</p>
<p>1ã€å‡†å¤‡æ•°æ®å­˜æ”¾çš„æ–‡ä»¶ç³»ç»Ÿ</p>
<p>æ–°å»ºä¸€ä¸ªé€»è¾‘å·ï¼Œå¹¶å°†å…¶æŒ‚è½½è‡³ç‰¹å®šç›®å½•å³å¯ã€‚è¿™é‡Œä¸å†ç»™å‡ºè¿‡ç¨‹ã€‚</p>
<p>è¿™é‡Œå‡è®¾å…¶é€»è¾‘å·çš„æŒ‚è½½ç›®å½•ä¸º/mydataï¼Œè€Œåéœ€è¦åˆ›å»º/mydata/dataç›®å½•åšä¸ºmysqlæ•°æ®çš„å­˜æ”¾ç›®å½•ã€‚</p>
<p>2ã€æ–°å»ºç”¨æˆ·ä»¥å®‰å…¨æ–¹å¼è¿è¡Œè¿›ç¨‹ï¼š</p>
<h1 id="groupadd-r-mysql">groupadd -r mysql</h1>
<h1 id="useradd-g-mysql-r-s-sbinnologin-m-d-mydatadata-mysql">useradd -g mysql -r -s /sbin/nologin -M -d /mydata/data mysql</h1>
<h1 id="chown-r-mysqlmysql-mydatadata">chown -R mysql:mysql /mydata/data</h1>
<p>3ã€å®‰è£…å¹¶åˆå§‹åŒ–mysql-5.5.28</p>
<p>é¦–å…ˆä¸‹è½½å¹³å°å¯¹åº”çš„mysqlç‰ˆæœ¬è‡³æœ¬åœ°ï¼Œè¿™é‡Œæ˜¯32ä½å¹³å°ï¼Œå› æ­¤ï¼Œé€‰æ‹©çš„ä¸ºmysql-5.5.28-linux2.6-i686.tar.gzï¼Œå…¶ä¸‹è½½ä½ç½®ä¸ºftp://172.16.0.1/pub/Sources/mysql-5.5ã€‚</p>
<h1 id="tar-xf-mysql-5528-linux26-i686targz-c-usrlocal">tar xf mysql-5.5.28-linux2.6-i686.tar.gz -C /usr/local</h1>
<h1 id="cd-usrlocal">cd /usr/local/</h1>
<h1 id="ln-sv-mysql-5524-linux26-i686-mysql">ln -sv mysql-5.5.24-linux2.6-i686  mysql</h1>
<h1 id="cd-mysql">cd mysql</h1>
<h1 id="chown-r-mysqlmysql">chown -R mysql:mysql  .</h1>
<h1 id="scriptsmysql_install_db-usermysql-datadirmydatadata">scripts/mysql_install_db --user=mysql --datadir=/mydata/data</h1>
<h1 id="chown-r-root">chown -R root  .</h1>
<p>4ã€ä¸ºmysqlæä¾›ä¸»é…ç½®æ–‡ä»¶ï¼š</p>
<h1 id="cd-usrlocalmysql">cd /usr/local/mysql</h1>
<h1 id="cp-support-filesmy-largecnf-etcmycnf">cp support-files/my-large.cnf  /etc/my.cnf</h1>
<p>å¹¶ä¿®æ”¹æ­¤æ–‡ä»¶ä¸­thread_concurrencyçš„å€¼ä¸ºä½ çš„CPUä¸ªæ•°ä¹˜ä»¥2ï¼Œæ¯”å¦‚è¿™é‡Œä½¿ç”¨å¦‚ä¸‹è¡Œï¼š<br>
thread_concurrency = 2</p>
<p>å¦å¤–è¿˜éœ€è¦æ·»åŠ å¦‚ä¸‹è¡ŒæŒ‡å®šmysqlæ•°æ®æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼š<br>
datadir = /mydata/data</p>
<p>5ã€ä¸ºmysqlæä¾›sysvæœåŠ¡è„šæœ¬ï¼š</p>
<h1 id="cd-usrlocalmysql-2">cd /usr/local/mysql</h1>
<h1 id="cp-support-filesmysqlserver-etcrcdinitdmysqld">cp support-files/mysql.server  /etc/rc.d/init.d/mysqld</h1>
<p>æ·»åŠ è‡³æœåŠ¡åˆ—è¡¨ï¼š</p>
<h1 id="chkconfig-add-mysqld">chkconfig --add mysqld</h1>
<h1 id="chkconfig-mysqld-on">chkconfig mysqld on</h1>
<p>è€Œåå°±å¯ä»¥å¯åŠ¨æœåŠ¡æµ‹è¯•ä½¿ç”¨äº†ã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨mysqlçš„å®‰è£…ç¬¦åˆç³»ç»Ÿä½¿ç”¨è§„èŒƒï¼Œå¹¶å°†å…¶å¼€å‘ç»„ä»¶å¯¼å‡ºç»™ç³»ç»Ÿä½¿ç”¨ï¼Œè¿™é‡Œè¿˜éœ€è¦è¿›è¡Œå¦‚ä¸‹æ­¥éª¤ï¼š</p>
<p>6ã€è¾“å‡ºmysqlçš„manæ‰‹å†Œè‡³manå‘½ä»¤çš„æŸ¥æ‰¾è·¯å¾„ï¼š</p>
<p>ç¼–è¾‘/etc/man.configï¼Œæ·»åŠ å¦‚ä¸‹è¡Œå³å¯ï¼š<br>
MANPATH  /usr/local/mysql/man</p>
<p>7ã€è¾“å‡ºmysqlçš„å¤´æ–‡ä»¶è‡³ç³»ç»Ÿå¤´æ–‡ä»¶è·¯å¾„/usr/includeï¼š</p>
<p>è¿™å¯ä»¥é€šè¿‡ç®€å•çš„åˆ›å»ºé“¾æ¥å®ç°ï¼š</p>
<h1 id="ln-sv-usrlocalmysqlinclude-usrincludemysql">ln -sv /usr/local/mysql/include  /usr/include/mysql</h1>
<p>8ã€è¾“å‡ºmysqlçš„åº“æ–‡ä»¶ç»™ç³»ç»Ÿåº“æŸ¥æ‰¾è·¯å¾„ï¼š</p>
<h1 id="echo-usrlocalmysqllib-etcldsoconfdmysqlconf">echo '/usr/local/mysql/lib' &gt; /etc/ld.so.conf.d/mysql.conf</h1>
<p>è€Œåè®©ç³»ç»Ÿé‡æ–°è½½å…¥ç³»ç»Ÿåº“ï¼š</p>
<h1 id="ldconfig">ldconfig</h1>
<p>9ã€ä¿®æ”¹PATHç¯å¢ƒå˜é‡ï¼Œè®©ç³»ç»Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨mysqlçš„ç›¸å…³å‘½ä»¤ã€‚å…·ä½“å®ç°è¿‡ç¨‹è¿™é‡Œä¸å†ç»™å‡ºã€‚</p>
<p>ä¸‰ã€ç¼–è¯‘å®‰è£…php-5.4.4</p>
<p>1ã€è§£å†³ä¾èµ–å…³ç³»ï¼š</p>
<p>è¯·é…ç½®å¥½yumæºï¼ˆå¯ä»¥æ˜¯æœ¬åœ°ç³»ç»Ÿå…‰ç›˜ï¼‰åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<h1 id="yum-y-groupinstall-x-software-development">yum -y groupinstall &quot;X Software Development&quot;</h1>
<p>å¦‚æœæƒ³è®©ç¼–è¯‘çš„phpæ”¯æŒmcryptã€mhashæ‰©å±•å’Œlibeventï¼Œæ­¤å¤„è¿˜éœ€è¦ä¸‹è½½ftp://172.16.0.1/pub/Sources/ngnixç›®å½•ä¸­çš„å¦‚ä¸‹å‡ ä¸ªrpmåŒ…å¹¶å®‰è£…ä¹‹ï¼š<br>
libmcrypt-2.5.8-4.el5.centos.i386.rpm<br>
libmcrypt-devel-2.5.8-4.el5.centos.i386.rpm<br>
mhash-0.9.9-1.el5.centos.i386.rpm<br>
mhash-devel-0.9.9-1.el5.centos.i386.rpm<br>
mcrypt-2.6.8-1.el5.i386.rpm</p>
<p>æœ€å¥½ä½¿ç”¨å‡çº§çš„æ–¹å¼å®‰è£…ä¸Šé¢çš„rpmåŒ…ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<h1 id="rpm-uvh">rpm -Uvh</h1>
<p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦å®‰è£…libeventï¼Œç³»ç»Ÿä¸€èˆ¬ä¼šè‡ªå¸¦libeventï¼Œä½†ç‰ˆæœ¬æœ‰äº›ä½ã€‚å› æ­¤å¯ä»¥å‡çº§å®‰è£…ä¹‹ï¼Œå®ƒåŒ…å«å¦‚ä¸‹ä¸¤ä¸ªrpmåŒ…ã€‚<br>
libevent-2.0.17-2.i386.rpm<br>
libevent-devel-2.0.17-2.i386.rpm</p>
<p>è¯´æ˜ï¼šlibeventæ˜¯ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶é€šçŸ¥åº“æ–‡ä»¶ï¼Œå…¶APIæä¾›äº†åœ¨æŸæ–‡ä»¶æè¿°ä¸Šå‘ç”ŸæŸäº‹ä»¶æ—¶æˆ–å…¶è¶…æ—¶æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°çš„æœºåˆ¶ï¼Œå®ƒä¸»è¦ç”¨æ¥æ›¿æ¢äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œæœåŠ¡å™¨ä¸Šçš„event loopæœºåˆ¶ã€‚ç›®å‰æ¥è¯´ï¼Œ libeventæ”¯æŒ/dev/pollã€kqueueã€selectã€pollã€epollåŠSolarisçš„event portsã€‚</p>
<p>2ã€ç¼–è¯‘å®‰è£…php-5.4.4</p>
<p>é¦–å…ˆä¸‹è½½æºç åŒ…è‡³æœ¬åœ°ç›®å½•ï¼Œä¸‹è½½ä½ç½®ftp://172.16.0.1/pub/Sources/new_lampã€‚</p>
<h1 id="tar-xf-php-544tarbz2">tar xf php-5.4.4.tar.bz2</h1>
<h1 id="cd-php-544">cd php-5.4.4</h1>
<h1 id="configure-prefixusrlocalphp-with-mysqlusrlocalmysql-with-openssl-enable-fpm-enable-sockets-enable-sysvshm-with-mysqliusrlocalmysqlbinmysql_config-enable-mbstring-with-freetype-dir-with-jpeg-dir-with-png-dir-with-zlib-dir-with-libxml-dirusr-enable-xml-with-mhash-with-mcrypt-with-config-file-pathetc-with-config-file-scan-diretcphpd-with-bz2-with-curl">./configure --prefix=/usr/local/php --with-mysql=/usr/local/mysql --with-openssl --enable-fpm --enable-sockets --enable-sysvshm  --with-mysqli=/usr/local/mysql/bin/mysql_config --enable-mbstring --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib-dir --with-libxml-dir=/usr --enable-xml  --with-mhash --with-mcrypt  --with-config-file-path=/etc --with-config-file-scan-dir=/etc/php.d --with-bz2 --with-curl</h1>
<p>è¯´æ˜ï¼šå¦‚æœå‰é¢ç¬¬1æ­¥è§£å†³ä¾èµ–å…³ç³»æ—¶å®‰è£…mcryptç›¸å…³çš„ä¸¤ä¸ªrpmåŒ…ï¼Œæ­¤./configureå‘½ä»¤è¿˜å¯ä»¥å¸¦ä¸Š--with-mcrypté€‰é¡¹ä»¥è®©phpæ”¯æŒmycrptæ‰©å±•ã€‚--with-snmpé€‰é¡¹åˆ™ç”¨äºå®ç°phpçš„SNMPæ‰©å±•ï¼Œä½†æ­¤åŠŸèƒ½è¦æ±‚æå‰å®‰è£…net-snmpç›¸å…³è½¯ä»¶åŒ…ã€‚</p>
<h1 id="make">make</h1>
<h1 id="make-test">make test</h1>
<h1 id="make-intall">make intall</h1>
<p>ä¸ºphpæä¾›é…ç½®æ–‡ä»¶ï¼š</p>
<h1 id="cp-phpini-production-etcphpini">cp php.ini-production /etc/php.ini</h1>
<p>ä¸ºphp-fpmæä¾›Sysv initè„šæœ¬ï¼Œå¹¶å°†å…¶æ·»åŠ è‡³æœåŠ¡åˆ—è¡¨ï¼š</p>
<h1 id="cp-sapifpminitdphp-fpm-etcrcdinitdphp-fpm">cp sapi/fpm/init.d.php-fpm  /etc/rc.d/init.d/php-fpm</h1>
<h1 id="chmod-x-etcrcdinitdphp-fpm">chmod +x /etc/rc.d/init.d/php-fpm</h1>
<h1 id="chkconfig-add-php-fpm">chkconfig --add php-fpm</h1>
<h1 id="chkconfig-php-fpm-on">chkconfig php-fpm on</h1>
<p>ä¸ºphp-fpmæä¾›é…ç½®æ–‡ä»¶ï¼š</p>
<h1 id="cp-usrlocalphpetcphp-fpmconfdefault-usrlocalphpetcphp-fpmconf">cp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf</h1>
<p>ç¼–è¾‘php-fpmçš„é…ç½®æ–‡ä»¶ï¼š</p>
<h1 id="vim-usrlocalphpetcphp-fpmconf">vim /usr/local/php/etc/php-fpm.conf</h1>
<p>é…ç½®fpmçš„ç›¸å…³é€‰é¡¹ä¸ºä½ æ‰€éœ€è¦çš„å€¼ï¼Œå¹¶å¯ç”¨pidæ–‡ä»¶ï¼ˆå¦‚ä¸‹æœ€åä¸€è¡Œï¼‰ï¼š<br>
pm.max_children = 150<br>
pm.start_servers = 8<br>
pm.min_spare_servers = 5<br>
pm.max_spare_servers = 10<br>
pid = /usr/local/php/var/run/php-fpm.pid</p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥å¯åŠ¨php-fpmäº†ï¼š</p>
<h1 id="service-php-fpm-start">service php-fpm start</h1>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥éªŒæ­£ï¼ˆå¦‚æœæ­¤å‘½ä»¤è¾“å‡ºæœ‰ä¸­å‡ ä¸ªphp-fpmè¿›ç¨‹å°±è¯´æ˜å¯åŠ¨æˆåŠŸäº†ï¼‰ï¼š</p>
<h1 id="ps-aux-grep-php-fpm">ps aux | grep php-fpm</h1>
<p>å››ã€æ•´åˆnginxå’Œphp5</p>
<p>1ã€ç¼–è¾‘/etc/nginx/nginx.confï¼Œå¯ç”¨å¦‚ä¸‹é€‰é¡¹ï¼š<br>
location ~ .php$ {<br>
root           html;<br>
fastcgi_pass   127.0.0.1:9000;<br>
fastcgi_index  index.php;<br>
fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;<br>
include        fastcgi_params;<br>
}</p>
<p>2ã€ç¼–è¾‘/etc/nginx/fastcgi_paramsï¼Œå°†å…¶å†…å®¹æ›´æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š<br>
fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;<br>
fastcgi_param  SERVER_SOFTWARE    nginx;<br>
fastcgi_param  QUERY_STRING       $query_string;<br>
fastcgi_param  REQUEST_METHOD     $request_method;<br>
fastcgi_param  CONTENT_TYPE       $content_type;<br>
fastcgi_param  CONTENT_LENGTH     $content_length;<br>
fastcgi_param  SCRIPT_FILENAME    <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><msub><mi>t</mi><mi>r</mi></msub><mi>o</mi><mi>o</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">document_root</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span></span></span></span>fastcgi_script_name;<br>
fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;<br>
fastcgi_param  REQUEST_URI        $request_uri;<br>
fastcgi_param  DOCUMENT_URI       $document_uri;<br>
fastcgi_param  DOCUMENT_ROOT      $document_root;<br>
fastcgi_param  SERVER_PROTOCOL    $server_protocol;<br>
fastcgi_param  REMOTE_ADDR        $remote_addr;<br>
fastcgi_param  REMOTE_PORT        $remote_port;<br>
fastcgi_param  SERVER_ADDR        $server_addr;<br>
fastcgi_param  SERVER_PORT        $server_port;<br>
fastcgi_param  SERVER_NAME        $server_name;</p>
<p>å¹¶åœ¨æ‰€æ”¯æŒçš„ä¸»é¡µé¢æ ¼å¼ä¸­æ·»åŠ phpæ ¼å¼çš„ä¸»é¡µï¼Œç±»ä¼¼å¦‚ä¸‹ï¼š<br>
location / {<br>
root   html;<br>
index  index.php index.html index.htm;<br>
}</p>
<p>è€Œåé‡æ–°è½½å…¥nginxçš„é…ç½®æ–‡ä»¶ï¼š</p>
<h1 id="service-nginx-reload">service nginx reload</h1>
<p>3ã€åœ¨/usr/htmlæ–°å»ºindex.phpçš„æµ‹è¯•é¡µé¢ï¼Œæµ‹è¯•phpæ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼š</p>
<h1 id="cat-usrhtmlindexphp-eof">cat &gt; /usr/html/index.php &lt;&lt; EOF</h1>
<?php
phpinfo();
?>
<p>æ¥ç€å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®æ­¤æµ‹è¯•é¡µé¢äº†ã€‚</p>
<p>äº”ã€å®‰è£…xcacheï¼Œä¸ºphpåŠ é€Ÿï¼š</p>
<p>1ã€å®‰è£…</p>
<h1 id="tar-xf-xcache-200targz">tar xf xcache-2.0.0.tar.gz</h1>
<h1 id="cd-xcache-200">cd xcache-2.0.0</h1>
<h1 id="usrlocalphpbinphpize">/usr/local/php/bin/phpize</h1>
<h1 id="configure-enable-xcache-with-php-configusrlocalphpbinphp-config">./configure --enable-xcache --with-php-config=/usr/local/php/bin/php-config</h1>
<h1 id="make-make-install-2">make &amp;&amp; make install</h1>
<p>å®‰è£…ç»“æŸæ—¶ï¼Œä¼šå‡ºç°ç±»ä¼¼å¦‚ä¸‹è¡Œï¼š<br>
Installing shared extensions:     /usr/local/php/lib/php/extensions/no-debug-zts-20100525/</p>
<p>2ã€ç¼–è¾‘php.iniï¼Œæ•´åˆphpå’Œxcacheï¼š</p>
<p>é¦–å…ˆå°†xcacheæä¾›çš„æ ·ä¾‹é…ç½®å¯¼å…¥php.ini</p>
<h1 id="mkdir-etcphpd">mkdir /etc/php.d</h1>
<h1 id="cp-xcacheini-etcphpd">cp xcache.ini /etc/php.d</h1>
<p>è¯´æ˜ï¼šxcache.iniæ–‡ä»¶åœ¨xcacheçš„æºç ç›®å½•ä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥ç¼–è¾‘/etc/php.d/xcache.iniï¼Œæ‰¾åˆ°zend_extensionå¼€å¤´çš„è¡Œï¼Œä¿®æ”¹ä¸ºå¦‚ä¸‹è¡Œï¼š<br>
zend_extension = /usr/local/php/lib/php/extensions/no-debug-zts-20100525/xcache.so</p>
<p>æ³¨æ„ï¼šå¦‚æœphp.iniæ–‡ä»¶ä¸­æœ‰å¤šæ¡zend_extensionæŒ‡ä»¤è¡Œï¼Œè¦ç¡®ä¿æ­¤æ–°å¢çš„è¡Œæ’åœ¨ç¬¬ä¸€ä½ã€‚</p>
<p>3ã€é‡æ–°å¯åŠ¨php-fpm</p>
<h1 id="service-php-fpm-restart">service php-fpm restart</h1>
<p>å…­ã€è¡¥å……è¯´æ˜</p>
<p>å¦‚æœè¦åœ¨SSLä¸­ä½¿ç”¨phpï¼Œéœ€è¦åœ¨phpçš„locationä¸­æ·»åŠ æ­¤é€‰é¡¹ï¼š</p>
<p>fastcgi_param HTTPS on;</p>
<p>è¡¥å……é˜…è¯»ææ–™ï¼š</p>
<p>Events is one of paradigms to achieve asynchronous execution. But not all asynchronous systems use events. That is about semantic meaning of these two - one is super-entity of another.</p>
<p>epoll and aio use different metaphors:</p>
<p>epoll is a blocking operation (epoll_wait()) - you block the thread until some event happens and then you dispatch the event to different procedures/functions/branches in your code.</p>
<p>In AIO you pass address of you callback function (completion routine) to the system and the system calls your function when something happens.</p>
<p>Problem with AIO is that your callback function code runs from system thread and so on top of system stack. A few problems with that as you can imagine.</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://fjw3214.github.io/post/hello-gridea</id>
        <link href="https://fjw3214.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>